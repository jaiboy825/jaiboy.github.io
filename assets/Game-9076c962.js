import{d as N,r as g,o as O,c as y,f as I,w as V,T as F,e as f,b as H,t as z,h as P,g as R,_ as T}from"./index-1681266d.js";import{S as j,a as q,W as X,D as $,j as J,c as Q,k as U,l as Y}from"./three.module-d46fd82a.js";import{O as Z}from"./OrbitControls-1f341be8.js";const ee={key:0,class:"content-container text-white"},te={class:"main-content fs-50 italic"},se=N({__name:"Game",setup(ie){const{proxy:u}=R(),x=g(),a=new j,v=new q(75,innerWidth/innerHeight,.1,1e3),n=new X({antialias:!0,alpha:!0});n.shadowMap.enabled=!0,n.setSize(innerWidth,innerHeight);const h=new Z(v,n.domElement);h.minDistance=10,h.maxDistance=100,h.rotateSpeed=.4,h.enablePan=!1;class m extends Q{constructor({width:e,height:c,depth:p,color:_="#00ff00",velocity:M={x:0,y:0,z:0},position:b={x:0,y:0,z:0},zAcceleration:W=!1}){super(new U(e,c,p),new Y({color:_})),this.width=e,this.height=c,this.depth=p,this.position.set(b.x,b.y,b.z),this.right=this.position.x+this.width/2,this.left=this.position.x-this.width/2,this.bottom=this.position.y-this.height/2,this.top=this.position.y+this.height/2,this.front=this.position.z+this.depth/2,this.back=this.position.z-this.depth/2,this.velocity=M,this.gravity=-.004,this.zAcceleration=W}updateSides(){this.right=this.position.x+this.width/2,this.left=this.position.x-this.width/2,this.bottom=this.position.y-this.height/2,this.top=this.position.y+this.height/2,this.front=this.position.z+this.depth/2,this.back=this.position.z-this.depth/2}update(e){this.updateSides(),this.zAcceleration&&(this.velocity.z+=3e-4),this.position.x+=this.velocity.x,this.position.z+=this.velocity.z,this.applyGravity(e)}applyGravity(e){this.velocity.y+=this.gravity,S({box1:this,box2:e})?(this.velocity.y*=.5,this.velocity.y=-this.velocity.y):this.position.y+=this.velocity.y}}function S({box1:t,box2:e}){const c=t.right>=e.left&&t.left<=e.right,p=t.bottom+t.velocity.y<=e.top&&t.top>=e.bottom,_=t.front>=e.back&&t.back<=e.front;return c&&p&&_}let s;function D(){s=new m({width:1,height:1,depth:1,velocity:{x:0,y:-.001,z:0}}),s.castShadow=!0,a.add(s)}let o;function K(){o=new m({width:10,height:.5,depth:50,color:"#0369a1",position:{x:0,y:-2,z:0}}),o.position.y=-2,o.receiveShadow=!0,a.add(o)}let r;function B(){r=new $(16777215,1),r.position.y=3,r.position.z=1,r.castShadow=!0,a.add(r),a.add(new J(16777215,.3))}v.position.z=5;const i={a:{pressed:!1},d:{pressed:!1},s:{pressed:!1},w:{pressed:!1}};addEventListener("keydown",t=>{switch(t.code){case"KeyA":i.a.pressed=!0;break;case"KeyD":i.d.pressed=!0;break;case"KeyS":i.s.pressed=!0;break;case"KeyW":i.w.pressed=!0;break;case"Space":s.velocity.y=.08;break}}),addEventListener("keyup",t=>{switch(t.code){case"KeyA":i.a.pressed=!1;break;case"KeyD":i.d.pressed=!1;break;case"KeyS":i.s.pressed=!1;break;case"KeyW":i.w.pressed=!1;break}});let d,C=[],G=0,w=100;function A(){const t=requestAnimationFrame(A);n.render(a,v),l.value&&(s.velocity.x=0,s.velocity.z=0,i.a.pressed?s.velocity.x=-.05:i.d.pressed&&(s.velocity.x=.05),i.s.pressed?s.velocity.z=.05:i.w.pressed&&(s.velocity.z=-.05),s.update(o),C.forEach(e=>{e.update(o),S({box1:s,box2:e})&&(cancelAnimationFrame(t),l.value=!1,k.value=!0)}),G%w===0&&(w>40&&(w-=40),d=new m({width:1,height:1,depth:1,position:{x:(Math.random()-.5)*10,y:0,z:-20},velocity:{x:0,y:0,z:.005},color:"red",zAcceleration:!0}),d.castShadow=!0,a.add(d),C.push(d)),G++)}const l=g(!1),k=g(!1);function E(){l.value=!0,D()}function L(){u==null||u.$router.push("/box")}return O(async()=>{x.value.appendChild(n.domElement),await K(),await B(),A()}),(t,e)=>(f(),y("div",{ref_key:"canvas",ref:x,class:"canvas-container"},[I(F,{name:"fade"},{default:V(()=>[l.value?P("",!0):(f(),y("div",ee,[H("div",te,z(k.value?"END":"Box Game"),1),k.value?(f(),y("button",{key:1,class:"view-btn",onClick:L},z("GO BOX"))):(f(),y("button",{key:0,class:"view-btn",onClick:E},z("Start")))]))]),_:1})],512))}});const re=T(se,[["__scopeId","data-v-7719e80b"]]);export{re as default};
